# Техническое задание: Сервис психологического анализа кофейной гущи "CoffeeReader"

## EXECUTIVE SUMMARY

### Проект в двух словах
**CoffeeReader** — AI-платформа психологического самопознания через анализ кофейной гущи, превращающая древнюю практику в современный инструмент персонального развития.

### Ключевые показатели
- **Рынок**: 15 млн человек в РФ интересуются гаданиями и психологией
- **Целевая выручка**: 20 млн ₽/год к концу первого года
- **Точка безубыточности**: 4-й месяц после запуска
- **ROI**: 340% за первый год
- **Инвестиции на MVP**: 1.2 млн ₽
- **Срок окупаемости**: 7 месяцев

### Конкурентные преимущества
1. **Научный подход** вместо мистики — проективная психология
2. **Персональный AI-психолог** с памятью и контекстом
3. **Мультиплатформенность** — Telegram, WhatsApp, WeChat
4. **Низкая стоимость привлечения** — виральность через социальные механики
5. **Готовая инфраструктура** — n8n уже настроен и работает

### Почему сейчас?
- **Рост рынка mental health** на 25% в год
- **Принятие AI-консультантов** выросло на 300% за 2024 год
- **Telegram Mini Apps** — новый канал с 800 млн пользователей
- **Кризис доступности психологов** — средняя цена 3000₽/сессия

## АНАЛИЗ РЫНКА И КОНКУРЕНТОВ

### Размер рынка
| Сегмент | Объем РФ | Рост в год | Наша доля (цель) |
|---------|----------|------------|-------------------|
| Онлайн-гадания | 2.5 млрд ₽ | 35% | 0.8% |
| Mental health apps | 4.2 млрд ₽ | 45% | 0.5% |
| Психологические консультации | 18 млрд ₽ | 20% | 0.1% |
| **TAM (Total)** | **24.7 млрд ₽** | **28%** | **200 млн ₽** |
| **SAM (Serviceable)** | **6.7 млрд ₽** | **40%** | **50 млн ₽** |
| **SOM (Реалистично год 1)** | **800 млн ₽** | **45%** | **20 млн ₽** |

### Анализ конкурентов

| Конкурент | Пользователи | Монетизация | Сильные стороны | Слабости | Наше преимущество |
|-----------|--------------|-------------|-----------------|----------|-------------------|
| **Гороскопы Mail.ru** | 5M MAU | Реклама, 50₽/мес | Большая аудитория | Общие предсказания | Персонализация через AI |
| **Tarot.com** | 2M MAU | $9.99/мес | Качественный контент | Только английский | Русский язык, культурная адаптация |
| **AstroGuide** | 500K MAU | 399₽/мес | Комплексный подход | Сложный интерфейс | Простота, фокус на кофе |
| **Мой психолог (Яндекс)** | 300K MAU | 2000₽/сессия | Реальные психологи | Дорого, очереди | Мгновенный доступ, низкая цена |
| **Replika AI** | 10M MAU | $70/год | Продвинутый AI | Общение, не анализ | Специализация на самопознании |
| **Гадалки в Telegram** | ~1M пользователей | 500-5000₽ | Прямой контакт | Мошенничество | Прозрачность, фиксированные цены |

### Почему мы победим
1. **Узкая ниша** — только кофейная гуща, глубокая экспертиза
2. **Технологическое превосходство** — RAG, векторные БД, персонализация
3. **Лучшая unit-экономика** — автоматизация vs ручной труд конкурентов
4. **Скорость итераций** — релизы каждую неделю vs месяцы у корпораций

## UNIT-ЭКОНОМИКА

### Расчет на одного пользователя

| Метрика | Месяц 1 | Месяц 3 | Месяц 6 | Месяц 12 |
|---------|---------|---------|---------|----------|
| **Доходы** |||||
| ARPU | 20₽ | 40₽ | 70₽ | 100₽ |
| ARPPU | 400₽ | 450₽ | 500₽ | 550₽ |
| Конверсия Free→Paid | 5% | 9% | 14% | 18% |
| **Расходы** |||||
| CAC (привлечение) | 500₽ | 350₽ | 250₽ | 200₽ |
| AI costs/user | 15₽ | 25₽ | 35₽ | 40₽ |
| Инфраструктура/user | 5₽ | 4₽ | 3₽ | 2₽ |
| Поддержка/user | 10₽ | 8₽ | 6₽ | 5₽ |
| **Ключевые метрики** |||||
| Gross Margin | -93% | 28% | 47% | 53% |
| LTV (6 месяцев) | 120₽ | 270₽ | 420₽ | 600₽ |
| LTV/CAC | 0.24 | 0.77 | 1.68 | 3.0 |
| Payback Period | - | 8 мес | 4 мес | 2 мес |
| **Cohort Retention** |||||
| Month 1 | 100% | 100% | 100% | 100% |
| Month 2 | 35% | 40% | 45% | 50% |
| Month 3 | 20% | 28% | 35% | 40% |
| Month 6 | 10% | 18% | 25% | 30% |
| Month 12 | 5% | 10% | 15% | 20% |

### Break-even анализ
- **При 5,000 активных пользователей**: покрываем операционные расходы
- **При 12,000 активных пользователей**: полная безубыточность
- **При 25,000 активных пользователей**: 35% EBITDA margin

## GO-TO-MARKET СТРАТЕГИЯ

### Фаза 1: Soft Launch (Недели 1-4)
**Цель**: 100 early adopters, product-market fit

| Канал | Тактика | Бюджет | Ожидаемый результат |
|-------|---------|--------|---------------------|
| Friends & Family | Личные приглашения | 0₽ | 30 пользователей |
| Telegram-каналы | Посев в 5 тематических | 10,000₽ | 40 пользователей |
| Инфлюенсеры | 3 микро-блогера | 15,000₽ | 30 пользователей |

### Фаза 2: Growth Hacking (Месяцы 2-3)
**Цель**: 1,000 активных пользователей

| Механика | Описание | Конверсия | Вклад в рост |
|----------|----------|-----------|-------------|
| Реферальная программа | Друг получает 7 дней Premium | 25% | 300 users |
| Вирусные карточки | Share результата в stories | 15% | 200 users |
| Партнерства | Кофейни, 3 сети | 30% | 300 users |
| SEO/Content | 20 статей + YouTube | 5% | 200 users |

### Фаза 3: Масштабирование (Месяцы 4-6)
**Цель**: 10,000 активных пользователей

| Канал | CPM | CTR | CR | CAC | Объем |
|-------|-----|-----|----|----|-------|
| Telegram Ads | 150₽ | 2.5% | 8% | 75₽ | 3000 |
| VK Реклама | 100₽ | 3% | 6% | 55₽ | 2000 |
| Яндекс.Директ | 200₽ | 2% | 10% | 100₽ | 1500 |
| TikTok | 80₽ | 4% | 5% | 40₽ | 2500 |
| Органика | - | - | - | 0₽ | 1000 |

### Retention стратегия

1. **Onboarding (Day 0-1)**
   - Персонализированное приветствие
   - Первое бесплатное гадание с WOW-эффектом
   - Обучающий тур по функциям

2. **Activation (Day 1-7)**
   - Push о бесплатной попытке
   - Ежедневный инсайт дня
   - Геймификация: первые достижения

3. **Habit Formation (Day 7-30)**
   - Утренние напоминания о кофе
   - Недельные отчеты с динамикой
   - Социальные челленджи

4. **Long-term Engagement (Day 30+)**
   - Персональный AI-психолог помнит историю
   - Сезонные события и акции
   - VIP-сообщество для Premium

## 1. ОБЩЕЕ ОПИСАНИЕ ПРОЕКТА

### 1.1. Концепция
Сервис психологического анализа кофейной гущи через мессенджеры с использованием AI для интерпретации визуальных паттернов и текстовых запросов. Позиционирование как научно-психологический инструмент самопознания, а не мистическая практика.

### 1.2. Ключевые особенности
- Полная имитация общения с живым психологом-консультантом
- Научный подход к интерпретации символов (проективная психология)
- Персонализированное сопровождение и анализ динамики
- Мультиплатформенность с единой базой пользователей
- Геймификация и социальные функции

### 1.3. Целевая аудитория
- **Первичная**: Женщины 25-45 лет, РФ, интересующиеся психологией и саморазвитием
- **Вторичная**: Мужчины и женщины 20-55 лет, ищущие психологическую поддержку
- **География старта**: Россия
- **География расширения**: СНГ, Индия, Юго-Восточная Азия

## 2. ТАРИФНЫЕ ПЛАНЫ

### 2.1. Структура тарифов

#### FREE (0₽)
- 3 фото кофейной гущи в неделю
- Неограниченный текстовый анализ символов
- Базовая интерпретация (500 токенов)
- История последних 7 анализов

#### START - пробный (0₽ на 7 дней)
- Полный функционал Basic тарифа
- Автоматический переход на Basic после 7 дней

#### BASIC (299₽/мес)
- 5 фото в день
- Расширенная интерпретация (1500 токенов)
- История за 3 месяца
- Базовые рекомендации на день
- Дневник настроения

#### ADVANCED (599₽/мес)
- 15 фото в день
- Углубленный анализ (3000 токенов)
- Анализ динамики дня
- Персональные инсайты
- Push-напоминания
- История за год
- Приоритетная обработка

#### PREMIUM (1499₽/мес)
- Безлимит фото
- Премиум AI модели (Claude/GPT-4)
- Индивидуальное сопровождение
- Анализ паттернов за период
- Приоритетная поддержка
- Вечная история
- Экспорт данных

## 3. ПЛАТЕЖНЫЕ СИСТЕМЫ - РАСШИРЕННЫЙ ВЫБОР

### 3.1. Основные варианты для России

| Система | Комиссия | Интеграция (часы) | Преимущества | Недостатки |
|---------|----------|-------------------|--------------|------------|
| **Telegram Stars** | 30% | 25 ч | • Встроенная в Telegram; • Простая интеграция; • Мгновенная оплата | • Высокая комиссия; • Только для Telegram |
| **СБП (Система быстрых платежей)** | 0.4-0.7% | 35 ч | • Минимальная комиссия; • Популярна в РФ; • Все банки | • Нужен банк-партнер; • Сложнее возвраты |
| **ЮKassa** | 2.8-3.5% | 30 ч | • Все способы оплаты; • Recurring платежи; • Надежность | • Нужно ИП/ООО; • Документооборот |
| **CloudPayments** | 2.8-3.8% | 28 ч | • Apple/Google Pay; • Подписки; • Widget для сайта | • Требует ИП/ООО; • Холд средств |
| **Тинькофф Касса** | 2-2.9% | 32 ч | • Быстрое подключение; • СБП встроен; • Сплитование | • Только Тинькофф; • Ограничения для новых |
| **Robokassa** | 3.9-5.5% | 26 ч | • 100+ способов; • Простое API; • Физлицам можно | • Высокая комиссия; • Устаревший интерфейс |
| **Cryptocloud** | 1-2% | 40 ч | • Крипто платежи; • Анонимность; • Низкая комиссия | • Волатильность; • Не все готовы |

### 3.2. Рекомендуемая комбинация для MVP
1. **Основная**: СБП через Тинькофф Кассу (минимальная комиссия)
2. **Резервная**: Telegram Stars (простота для пользователей)
3. **Перспектива**: CloudPayments (для web и других платформ)

## 4. ДЕТАЛЬНАЯ РАЗБИВКА ФУНКЦИОНАЛА

### 4.1. CORE ФУНКЦИИ (Обязательные для MVP)

| Функция | Описание | Часы | Приоритет |
|---------|----------|------|-----------|
| **Базовый Telegram Bot** | | | |
| ├─ Регистрация пользователей | Onboarding, сбор данных | 12 ч | P0 |
| ├─ Прием и валидация фото | Проверка качества, формата | 15 ч | P0 |
| ├─ Базовый AI анализ фото | OpenRouter Vision API | 20 ч | P0 |
| ├─ Генерация ответа | Промпты, форматирование | 18 ч | P0 |
| ├─ Текстовый ввод символов | Альтернатива фото | 10 ч | P0 |
| └─ Простая БД сессий | PostgreSQL базовая | 15 ч | P0 |
| **Система лимитов** | | | |
| ├─ Проверка тарифа | Базовая логика | 8 ч | P0 |
| ├─ Счетчики использования | Redis счетчики | 10 ч | P0 |
| └─ Блокировка при превышении | Уведомления | 6 ч | P0 |
| **Минимальная оплата** | | | |
| ├─ Telegram Stars базовая | Webhook, проверка | 15 ч | P0 |
| └─ Активация подписки | Обновление в БД | 10 ч | P0 |
| **ИТОГО CORE** | | **139 ч** | |

### 4.2. ESSENTIAL ФУНКЦИИ (Важные для продукта)

| Функция | Описание | Часы | Приоритет |
|---------|----------|------|-----------|
| **Улучшенный Bot UX** | | | |
| ├─ Typing индикаторы | Имитация набора | 4 ч | P1 |
| ├─ Вариативные ответы | Рандомизация фраз | 8 ч | P1 |
| ├─ Обработка ошибок | Graceful degradation | 10 ч | P1 |
| ├─ Inline кнопки меню | Навигация | 6 ч | P1 |
| └─ Multi-language заготовка | i18n структура | 12 ч | P2 |
| **Расширенные подписки** | | | |
| ├─ Trial период | 7 дней бесплатно | 15 ч | P1 |
| ├─ Автопродление | Recurring логика | 18 ч | P1 |
| ├─ Управление подпиской | Отмена, пауза | 12 ч | P1 |
| └─ Множественные платежки | 2-3 системы | 25 ч | P1 |
| **Базовый Mini App** | | | |
| ├─ Авторизация через Telegram | WebApp API | 10 ч | P1 |
| ├─ Профиль пользователя | Базовая информация | 12 ч | P1 |
| ├─ История анализов | Список с пагинацией | 15 ч | P1 |
| ├─ Управление подпиской UI | Тарифы, оплата | 14 ч | P1 |
| └─ Responsive дизайн | Mobile-first | 8 ч | P1 |
| **Память и контекст** | | | |
| ├─ Хранение диалогов | PostgreSQL + Vector | 20 ч | P1 |
| ├─ Учет предыдущих гаданий | Контекст в промптах | 15 ч | P1 |
| └─ Персонализация по истории | ML рекомендации | 25 ч | P2 |
| **ИТОГО ESSENTIAL** | | **219 ч** | |

### 4.3. ADVANCED ФУНКЦИИ (Конкурентные преимущества)

| Функция | Описание | Часы | Приоритет |
|---------|----------|------|-----------|
| **RAG система** | | | |
| ├─ Векторная БД паттернов | pgvector setup | 15 ч | P2 |
| ├─ Обучение на истории | Embeddings pipeline | 20 ч | P2 |
| ├─ Similarity search | Поиск похожих | 12 ч | P2 |
| └─ Feedback loop | Улучшение качества | 18 ч | P3 |
| **Дневник настроения** | | | |
| ├─ UI ввода настроения | Календарь, эмоции | 15 ч | P2 |
| ├─ Корреляция с гаданиями | Аналитика связей | 12 ч | P2 |
| ├─ Графики и визуализация | Charts.js | 10 ч | P2 |
| └─ Экспорт данных | PDF отчеты | 8 ч | P3 |
| **Ежедневный анализ** | | | |
| ├─ Агрегация за день | Сбор всех событий | 12 ч | P2 |
| ├─ AI суммаризация | Дневной отчет | 15 ч | P2 |
| ├─ Рекомендации на завтра | Персональные советы | 10 ч | P2 |
| └─ Email/Push доставка | Уведомления | 12 ч | P2 |
| **Социальные функции** | | | |
| ├─ Генерация карточек | Canvas API, шаблоны | 18 ч | P2 |
| ├─ Sharing в соцсети | Share API | 8 ч | P2 |
| ├─ Реферальная программа | Tracking, rewards | 20 ч | P3 |
| └─ Сообщество | Общий чат, форум | 25 ч | P3 |
| **Геймификация** | | | |
| ├─ Система достижений | Badges, уровни | 15 ч | P3 |
| ├─ Ежедневные задания | Quests, rewards | 12 ч | P3 |
| ├─ Streak tracking | Серии активности | 8 ч | P3 |
| └─ Leaderboard | Рейтинги | 10 ч | P3 |
| **ИТОГО ADVANCED** | | **261 ч** | |

### 4.4. PREMIUM ФУНКЦИИ (Дифференциация)

| Функция | Описание | Часы | Приоритет |
|---------|----------|------|-----------|
| **AI Voice** | | | |
| ├─ Голосовые сообщения | Speech-to-text | 20 ч | P3 |
| ├─ Озвучка ответов | TTS синтез | 15 ч | P3 |
| └─ Voice bot режим | Полностью голосовой | 25 ч | P4 |
| **Video анализ** | | | |
| ├─ Прием видео чашки | 360° обзор | 15 ч | P3 |
| ├─ Frame extraction | Ключевые кадры | 12 ч | P3 |
| └─ Multi-angle анализ | Комплексный разбор | 18 ч | P4 |
| **AR функции** | | | |
| ├─ AR визуализация | WebAR паттерны | 35 ч | P4 |
| ├─ 3D модели символов | Three.js | 30 ч | P4 |
| └─ Интерактивные подсказки | AR overlays | 25 ч | P4 |
| **Персональный психолог** | | | |
| ├─ Видео-консультации | WebRTC интеграция | 40 ч | P4 |
| ├─ Расписание и booking | Календарь слотов | 25 ч | P4 |
| ├─ CRM для психологов | Управление клиентами | 35 ч | P4 |
| └─ Marketplace психологов | Выбор специалиста | 45 ч | P4 |
| **ИТОГО PREMIUM** | | **340 ч** | |

### 4.5. ТЕХНИЧЕСКАЯ ИНФРАСТРУКТУРА

| Компонент | Описание | Часы | Приоритет |
|-----------|----------|------|-----------|
| **DevOps базовый** | | | |
| ├─ CI/CD pipeline | GitHub Actions | 15 ч | P0 |
| ├─ Docker контейнеры | Compose setup | 12 ч | P0 |
| ├─ Мониторинг базовый | Uptime, alerts | 10 ч | P0 |
| └─ Backup стратегия | Суточные бэкапы | 8 ч | P0 |
| **Безопасность** | | | |
| ├─ Rate limiting | DDoS защита | 10 ч | P1 |
| ├─ Шифрование данных | At rest & transit | 12 ч | P1 |
| ├─ GDPR compliance | Privacy политики | 15 ч | P1 |
| └─ Аудит логирование | Security logs | 8 ч | P1 |
| **Масштабирование** | | | |
| ├─ Load balancing | Nginx, HAProxy | 15 ч | P2 |
| ├─ Кэширование | Redis, CDN | 12 ч | P2 |
| ├─ Queue система | BullMQ, RabbitMQ | 18 ч | P2 |
| └─ Микросервисы | Service mesh | 35 ч | P3 |
| **Аналитика** | | | |
| ├─ Event tracking | Posthog setup | 12 ч | P1 |
| ├─ Dashboards | Metabase, Grafana | 15 ч | P2 |
| ├─ A/B testing | Feature flags | 20 ч | P2 |
| └─ ML pipeline | Прогнозы, сегменты | 30 ч | P3 |
| **ИТОГО INFRA** | | **253 ч** | |

### 4.6. ИНТЕГРАЦИИ С ПЛАТФОРМАМИ

| Платформа | Описание | Часы | Приоритет |
|-----------|----------|------|-----------|
| **WhatsApp Business** | | | |
| ├─ Базовая интеграция | API setup | 25 ч | P3 |
| ├─ Media handling | Фото, видео | 15 ч | P3 |
| ├─ Template messages | Уведомления | 12 ч | P3 |
| └─ Green tick верификация | Business профиль | 10 ч | P3 |
| **WeChat** | | | |
| ├─ Official Account | Регистрация, API | 35 ч | P4 |
| ├─ Mini Program | Отдельное приложение | 60 ч | P4 |
| ├─ WeChat Pay | Платежи в Китае | 25 ч | P4 |
| └─ QR код кампании | Offline промо | 15 ч | P4 |
| **Instagram** | | | |
| ├─ Story интеграция | API, sharing | 20 ч | P3 |
| ├─ DM bot | Автоответы | 25 ч | P3 |
| └─ Reels генерация | Видео контент | 30 ч | P4 |
| **VK** | | | |
| ├─ VK Bot | Сообщества API | 20 ч | P2 |
| ├─ VK Mini Apps | Встроенное приложение | 35 ч | P3 |
| └─ VK Pay | Платежи | 15 ч | P3 |
| **ИТОГО PLATFORMS** | | **342 ч** | |

## 5. ВАРИАНТЫ СБОРКИ MVP

### 5.1. Минимальный MVP (2 месяца)
**Бюджет: 700 000₽ | Срок: 8 недель**

| Модуль | Часы | Стоимость |
|--------|------|-----------|
| Core функции | 139 ч | 417 000₽ |
| СБП платежи | 35 ч | 105 000₽ |
| Базовый мониторинг | 25 ч | 75 000₽ |
| Тестирование (15%) | 30 ч | 90 000₽ |
| ~~Pre-MVP~~ | ~~60 ч~~ | ~~180 000₽~~ |
| **ИТОГО** | **169 ч** | **507 000₽** |

### 5.2. Оптимальный MVP (3 месяца)
**Бюджет: 1 200 000₽ | Срок: 12 недель**

| Модуль | Часы | Стоимость |
|--------|------|-----------|
| Core функции | 139 ч | 417 000₽ |
| Essential функции (выборочно) | 120 ч | 360 000₽ |
| 2 платежные системы | 50 ч | 150 000₽ |
| Базовая инфраструктура | 45 ч | 135 000₽ |
| Тестирование (15%) | 60 ч | 180 000₽ |
| ~~Pre-MVP~~ | ~~60 ч~~ | ~~180 000₽~~ |
| **ИТОГО** | **354 ч** | **1 062 000₽** |

### 5.3. Расширенный MVP (4 месяца)
**Бюджет: 1 800 000₽ | Срок: 16 недель**

| Модуль | Часы | Стоимость |
|--------|------|-----------|
| Core функции | 139 ч | 417 000₽ |
| Essential функции (все) | 219 ч | 657 000₽ |
| Advanced (RAG + дневник) | 110 ч | 330 000₽ |
| 3 платежные системы | 75 ч | 225 000₽ |
| Полная инфраструктура | 80 ч | 240 000₽ |
| Тестирование (15%) | 90 ч | 270 000₽ |
| **ИТОГО** | **713 ч** | **2 139 000₽** |

## 6. ФАЗЫ РАЗВИТИЯ С ГИБКИМ ПЛАНИРОВАНИЕМ

### Фаза 0: Pre-MVP (2-3 недели)
**Цель: Валидация гипотез**

| Задача | Часы | Результат |
|--------|------|-----------|
| Прототип бота | 20 ч | Тестовый бот для 10 человек |
| Тест промптов | 15 ч | Оптимальные промпты |
| Анализ конкурентов | 10 ч | Отчет и выводы |
| Customer development | 15 ч | 20 интервью |
| **ИТОГО** | **60 ч** | **180 000₽** |

### Фаза 1: MVP Launch (2-3 месяца)
**Цель: Первые платящие клиенты**

Выбор из вариантов 5.1, 5.2 или 5.3

### Фаза 2: Product-Market Fit (2-3 месяца)
**Цель: Retention > 40%, NPS > 50**

| Модуль | Часы | Опциональность |
|--------|------|----------------|
| A/B тестирование | 20 ч | Обязательно |
| Улучшение UX по feedback | 40 ч | Обязательно |
| RAG система | 65 ч | Желательно |
| Дневник настроения | 45 ч | Опционально |
| Социальные функции | 50 ч | Опционально |
| VK интеграция | 70 ч | Опционально |

### Фаза 3: Scaling (3-4 месяца)
**Цель: 10x рост пользователей**

| Модуль | Часы | Опциональность |
|--------|------|----------------|
| WhatsApp | 65 ч | Высокий приоритет |
| Реферальная программа | 20 ч | Высокий приоритет |
| Геймификация полная | 45 ч | Средний приоритет |
| Premium AI функции | 100 ч | Низкий приоритет |
| WeChat | 145 ч | По ситуации |

## 7. АЛЬТЕРНАТИВНЫЕ ТЕХНИЧЕСКИЕ РЕШЕНИЯ

### 7.1. Выбор базы данных

| Вариант | Плюсы | Минусы | Часы миграции |
|---------|-------|--------|---------------|
| **Supabase** (рекомендую) | • Realtime; • Auth встроен; • Векторы | • Лимиты на free | База |
| **Firebase** | • Google ecosystem; • Простота | • NoSQL; • Дороже | +20 ч |
| **MongoDB Atlas** | • Гибкость; • Масштабирование | • Нет векторов; • Сложнее | +30 ч |
| **Postgres + Redis** | • Полный контроль; • Дешевле | • Больше DevOps | +15 ч |

### 7.2. Выбор AI провайдера

| Провайдер | Стоимость/1M токенов | Качество | Скорость | Интеграция |
|-----------|----------------------|----------|----------|------------|
| **OpenRouter** (текущий) | $5-15 | Отлично | Быстро | 10 ч |
| **OpenAI API** | $10-30 | Отлично | Быстро | 8 ч |
| **Anthropic Claude** | $15-25 | Превосходно | Средне | 12 ч |
| **YandexGPT** | ₽500-1500 | Хорошо | Быстро | 15 ч |
| **GigaChat** | ₽300-900 | Средне | Быстро | 20 ч |
| **Self-hosted LLM** | Сервер $500/мес | Контроль | Зависит | 60 ч |

### 7.3. Выбор хостинга

| Вариант | Стоимость/мес | Масштабирование | DevOps часы |
|---------|---------------|-----------------|-------------|
| **Vercel + Supabase** | $20-100 | Авто | 10 ч |
| **Railway** | $20-200 | Авто | 15 ч |
| **Yandex Cloud** | ₽3000-15000 | Ручное | 30 ч |
| **VPS (Reg.ru)** | ₽2000-10000 | Ручное | 40 ч |
| **AWS/GCP** | $100-500 | Авто | 50 ч |

## 8. СТРУКТУРА БАЗЫ ДАННЫХ

```sql
-- Пользователи
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    telegram_id BIGINT UNIQUE,
    whatsapp_id VARCHAR(50),
    wechat_id VARCHAR(100),
    username VARCHAR(100),
    first_name VARCHAR(100),
    last_name VARCHAR(100),
    language_code VARCHAR(10) DEFAULT 'ru',
    timezone VARCHAR(50) DEFAULT 'Europe/Moscow',
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Подписки
CREATE TABLE subscriptions (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    plan_type VARCHAR(20), -- free, basic, advanced, premium
    status VARCHAR(20), -- active, cancelled, expired, trial
    started_at TIMESTAMPTZ DEFAULT NOW(),
    expires_at TIMESTAMPTZ,
    trial_ends_at TIMESTAMPTZ,
    auto_renew BOOLEAN DEFAULT true,
    payment_method VARCHAR(50),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Анализы
CREATE TABLE analyses (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    type VARCHAR(20), -- photo, text, question
    input_type VARCHAR(20), -- image, text
    input_data JSONB,
    image_url TEXT,
    patterns_detected JSONB,
    interpretation TEXT,
    tokens_used INTEGER,
    ai_model VARCHAR(50),
    session_id VARCHAR(100),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Лимиты использования
CREATE TABLE usage_limits (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    date DATE DEFAULT CURRENT_DATE,
    photos_used INTEGER DEFAULT 0,
    texts_used INTEGER DEFAULT 0,
    questions_used INTEGER DEFAULT 0,
    UNIQUE(user_id, date)
);

-- Платежи
CREATE TABLE payments (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    subscription_id UUID REFERENCES subscriptions(id),
    amount DECIMAL(10,2),
    currency VARCHAR(3) DEFAULT 'RUB',
    status VARCHAR(20),
    payment_system VARCHAR(50),
    payment_id VARCHAR(255),
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Дневник настроения
CREATE TABLE mood_diary (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id) ON DELETE CASCADE,
    date DATE DEFAULT CURRENT_DATE,
    mood_score INTEGER CHECK (mood_score BETWEEN 1 AND 10),
    emotions JSONB,
    notes TEXT,
    correlated_analyses UUID[],
    created_at TIMESTAMPTZ DEFAULT NOW(),
    UNIQUE(user_id, date)
);

-- Паттерны для RAG
CREATE TABLE pattern_library (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    pattern_name VARCHAR(100),
    pattern_category VARCHAR(50),
    description TEXT,
    psychological_meaning TEXT,
    positive_aspects TEXT,
    negative_aspects TEXT,
    recommendations TEXT,
    embedding vector(1536),
    usage_count INTEGER DEFAULT 0,
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Аналитика
CREATE TABLE analytics_events (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID REFERENCES users(id),
    event_type VARCHAR(100),
    event_data JSONB,
    platform VARCHAR(20),
    created_at TIMESTAMPTZ DEFAULT NOW()
);
```

## 9. REDIS СТРУКТУРЫ

```javascript
// Счетчики лимитов (TTL 24 часа)
rate_limit:user:{user_id}:photos = 3
rate_limit:user:{user_id}:texts = 50

// Сессии анализа (TTL 1 час)
session:{session_id} = {
  user_id, 
  context: [],
  last_activity
}

// Кэш подписок (TTL 5 минут)
subscription:user:{user_id} = {
  plan_type,
  limits,
  expires_at
}

// Очередь обработки изображений
queue:images = [
  {user_id, image_url, priority}
]
```

## 10. ТЕХНОЛОГИЧЕСКИЙ СТЕК

```yaml
Frontend:
  - Telegram Mini App: React + TypeScript + Tailwind CSS
  - UI Kit: Telegram UI Kit
  - State: Zustand
  - API: Axios + React Query

Backend:
  - Orchestration: n8n (существующий)
  - Database: Supabase PostgreSQL
  - Cache: Redis (Upstash)
  - Storage: Supabase Storage + Cloudflare R2
  - Queue: BullMQ
  
AI/ML:
  - Vision: OpenRouter (Llama Vision, GPT-4V)
  - Text: OpenRouter (Claude, GPT-4, Gemini)
  - Embeddings: OpenAI Ada
  - Vector DB: Supabase pgvector

Monitoring:
  - Analytics: Posthog
  - Errors: Sentry
  - Logs: Supabase Logs
```

## 11. МЕРЫ ИМИТАЦИИ ЧЕЛОВЕКА

### 11.1. Поведенческие паттерны

```javascript
// Вариативность приветствий
const greetings = [
  "Здравствуйте! Рада вас видеть снова 😊",
  "Добрый день! Как ваше настроение сегодня?",
  "Приветствую! Что интересного произошло?"
];

// Задержки между сообщениями
const delays = {
  typing_start: [2, 5], // секунды
  between_messages: [3, 7],
  analysis_time: [15, 30]
};

// "Опечатки" и исправления
const typos = {
  frequency: 0.02, // 2% сообщений
  corrections: true
};

// Персональные детали
const personal_touches = [
  "Кстати, вчера сама гадала на кофе...",
  "Знаете, у меня есть клиентка с похожим паттерном...",
  "Это напомнило мне один интересный случай..."
];
```

### 11.2. Контекстная персонализация
- Запоминание имени и обращение по имени
- Ссылки на предыдущие разговоры
- Учет времени суток и дня недели
- Реакция на праздники и события

## 12. РИСКИ И МИТИГАЦИЯ

| Риск | Вероятность | Воздействие | Митигация | Доп. часы |
|------|-------------|-------------|-----------|-----------|
| **Технические риски** | | | | |
| AI галлюцинации | Средняя | Высокое | Валидация, промпты | 20 ч |
| Перегрузка сервера | Низкая | Критическое | Queue, автоскейлинг | 30 ч |
| Утечка данных | Низкая | Критическое | Шифрование, аудит | 25 ч |
| **Бизнес риски** | | | | |
| Низкая конверсия | Высокая | Высокое | A/B тесты, онбординг | 40 ч |
| Высокий отток | Средняя | Высокое | Retention механики | 35 ч |
| Конкуренты копируют | Высокая | Среднее | Быстрые итерации | - |
| **Регуляторные риски** | | | | |
| Блокировка Telegram | Средняя | Высокое | Multi-platform | 100 ч |
| Запрет на гадания | Низкая | Критическое | Pivoting в психологию | 50 ч |
| Проблемы с налогами | Средняя | Среднее | Консультация, ИП | - |

## 13. БЕЗОПАСНОСТЬ ДАННЫХ И COMPLIANCE

### 13.1. Защита персональных данных

| Уровень | Меры защиты | Стандарт | Статус |
|---------|------------|----------|--------|
| **Передача данных** | | | |
| ├─ TLS 1.3 | Все соединения зашифрованы | ГОСТ Р 58833 | Обязательно |
| ├─ E2E шифрование | Для чувствительных данных | Signal Protocol | Рекомендуется |
| └─ Certificate Pinning | Защита от MITM | OWASP | Обязательно |
| **Хранение данных** | | | |
| ├─ Шифрование БД | AES-256 at rest | FIPS 140-2 | Обязательно |
| ├─ Токенизация | Замена PII токенами | PCI DSS | Обязательно |
| ├─ Сегментация | Разделение данных по критичности | ISO 27001 | Рекомендуется |
| └─ Backup шифрование | Защита резервных копий | 3-2-1 Rule | Обязательно |
| **Доступ к данным** | | | |
| ├─ MFA | Двухфакторная аутентификация | NIST 800-63B | Для админов |
| ├─ RBAC | Ролевой контроль доступа | ISO 27001 | Обязательно |
| ├─ Audit Logs | Логирование всех действий | SOC 2 | Обязательно |
| └─ Zero Trust | Проверка каждого запроса | NIST SP 800-207 | Перспектива |

### 13.2. Соответствие законодательству

| Регуляция | Требования | Наши меры | Срок |
|-----------|------------|-----------|------|
| **152-ФЗ "О персональных данных"** | | | |
| ├─ Согласие на обработку | Явное согласие при регистрации | ✓ Форма согласия в боте | До запуска |
| ├─ Локализация данных | Хранение в РФ | ✓ Сервера Yandex Cloud | До запуска |
| ├─ Уведомление Роскомнадзор | Регистрация оператора | ⏳ Подача документов | Месяц 1 |
| └─ Права субъекта | Доступ, изменение, удаление | ✓ API для запросов | До запуска |
| **GDPR (при экспансии в ЕС)** | | | |
| ├─ Privacy by Design | Защита на уровне архитектуры | ✓ Минимизация данных | Фаза 2 |
| ├─ Right to be Forgotten | Полное удаление по запросу | ✓ Автоматизация | Фаза 2 |
| ├─ Data Portability | Экспорт данных пользователя | ✓ JSON/CSV экспорт | Фаза 2 |
| └─ DPO назначение | Data Protection Officer | ⏳ Найм специалиста | Фаза 3 |
| **Закон о рекламе** | | | |
| ├─ Маркировка рекламы | Явное обозначение | ✓ Тег "Реклама" | До запуска |
| └─ Возрастные ограничения | 18+ для таргетинга | ✓ Проверка возраста | До запуска |

### 13.3. Этические принципы

1. **Прозрачность AI**
   - Отказ от ответственности за решения пользователя
   - Ссылка на научную базу интерпретаций

2. **Психологическая безопасность**
   - Отказ от диагностики психических расстройств
   - Рекомендации обращения к специалисту при необходимости
   - Горячая линия психологической помощи в критических случаях

3. **Конфиденциальность**
   - Анонимность по умолчанию
   - Отсутствие передачи данных третьим лицам
   - Удаление данных по запросу в течение 72 часов

### 13.4. План реагирования на инциденты

| Тип инцидента | Время реакции | Ответственный | Действия |
|---------------|---------------|---------------|----------|
| Утечка данных | 15 минут | CTO | Изоляция, анализ, патч |
| DDoS атака | 5 минут | DevOps | Включение защиты, масштабирование |
| Взлом аккаунта | 1 час | Support | Блокировка, восстановление |
| Нарушение compliance | 24 часа | Legal | Оценка, уведомление, исправление |

## 14. МЕТРИКИ И KPI

### 14.1. Продуктовые метрики

| Метрика | Week 1 | Month 1 | Month 3 | Month 6 |
|---------|--------|---------|---------|---------|
| **Acquisition** | | | | |
| Новые пользователи | 100 | 1000 | 5000 | 20000 |
| CAC | - | ₽1000 | ₽500 | ₽300 |
| Органика % | 100% | 70% | 50% | 60% |
| **Activation** | | | | |
| Первое гадание % | 60% | 65% | 70% | 75% |
| Trial активация % | - | 20% | 30% | 35% |
| Onboarding completion | 40% | 50% | 60% | 70% |
| **Retention** | | | | |
| D1 | 40% | 45% | 50% | 55% |
| D7 | 20% | 25% | 30% | 35% |
| D30 | - | 15% | 20% | 25% |
| **Revenue** | | | | |
| Платящие | 0 | 50 | 500 | 3500 |
| Конверсия в платные | 0% | 5% | 10% | 17.5% |
| ARPU | - | ₽20 | ₽40 | ₽70 |
| ARPPU | - | ₽400 | ₽450 | ₽500 |
| MRR | 0 | ₽20k | ₽200k | ₽1.4M |
| **Referral** | | | | |
| Приглашений на юзера | 0 | 0.1 | 0.3 | 0.5 |
| Виральный коэфф | 0 | 0.05 | 0.15 | 0.25 |

### 14.2. Технические метрики

| Метрика | Цель | Алерт | Критично |
|---------|------|-------|----------|
| Uptime | 99.9% | <99.5% | <99% |
| Response time | <2s | >3s | >5s |
| AI processing | <30s | >45s | >60s |
| Error rate | <1% | >2% | >5% |
| Стоимость/юзер | <₽50 | >₽100 | >₽200 |

## 15. A/B ТЕСТИРОВАНИЕ И ГИПОТЕЗЫ

### 15.1. Приоритетные гипотезы для тестирования

| Гипотеза | Метрика | Baseline | Target | Приоритет | Время теста |
|----------|---------|----------|--------|-----------|-------------|
| **Onboarding** | | | | | |
| Видео-туториал vs текст | Activation Rate | 60% | 75% | P0 | 2 недели |
| Персонализация по имени | D1 Retention | 40% | 50% | P1 | 2 недели |
| Пробное гадание сразу | Conversion to Trial | 20% | 30% | P0 | 1 неделя |
| **Monetization** | | | | | |
| Цена BASIC 299₽ vs 399₽ | Revenue per User | 40₽ | 50₽ | P0 | 3 недели |
| 14 дней trial vs 7 дней | Trial to Paid | 25% | 35% | P1 | 4 недели |
| Лимиты фото (3 vs 5) | Upgrade Rate | 10% | 15% | P1 | 2 недели |
| **Engagement** | | | | | |
| Push в 9:00 vs 19:00 | Open Rate | 25% | 35% | P2 | 1 неделя |
| Геймификация (баджи) | D7 Retention | 25% | 35% | P1 | 3 недели |
| Социальный шеринг | Viral Coefficient | 0.1 | 0.25 | P0 | 2 недели |
| **AI Quality** | | | | | |
| GPT-4 vs Claude vs Gemini | User Satisfaction | 7/10 | 8.5/10 | P0 | 2 недели |
| Длина ответа (500 vs 1500 токенов) | Session Duration | 5 мин | 8 мин | P2 | 1 неделя |
| Эмодзи в ответах | Engagement Rate | 30% | 40% | P3 | 1 неделя |

### 15.2. Инфраструктура A/B тестов

```javascript
// Конфигурация экспериментов
const experiments = {
  'onboarding_video': {
    variants: ['control_text', 'video_tutorial'],
    traffic_allocation: 0.5,
    min_sample_size: 1000,
    success_metric: 'activation_rate'
  },
  'pricing_test': {
    variants: ['299_rub', '399_rub'],
    traffic_allocation: 0.3,
    min_sample_size: 2000,
    success_metric: 'revenue_per_user'
  }
};
```

### 15.3. Критерии принятия решений

1. **Статистическая значимость**: p-value < 0.05
2. **Минимальный размер выборки**: 1000+ пользователей на вариант
3. **Длительность теста**: минимум 1 полный недельный цикл
4. **Практическая значимость**: улучшение метрики > 10%
5. **Отсутствие негативного влияния** на другие метрики

### 15.4. Roadmap экспериментов

| Месяц | Фокус | Количество тестов | Ожидаемый impact |
|-------|-------|-------------------|------------------|
| Месяц 1 | Activation | 3 | +25% конверсия в первое гадание |
| Месяц 2 | Monetization | 4 | +40% revenue per user |
| Месяц 3 | Retention | 5 | +30% D30 retention |
| Месяц 4 | Virality | 3 | +150% referral rate |
| Месяц 5 | Personalization | 4 | +20% engagement |
| Месяц 6 | Optimization | 3 | -30% CAC |

## 16. КОМАНДА И РОЛИ

### 16.1. Минимальная команда (MVP)

| Роль | Занятость | Стоимость/мес | Ответственность |
|------|-----------|---------------|-----------------|
| **Full-stack dev** | 100% | 250 000₽ | Backend, n8n, API |
| **Frontend dev** | 100% | 200 000₽ | Mini App, UI |
| **Designer** | 50% | 75 000₽ | UX, визуал |
| **QA** | 50% | 60 000₽ | Тестирование |
| **ИТОГО** | | **585 000₽/мес** | |

### 16.2. Оптимальная команда (Growth)

| Роль | Занятость | Стоимость/мес | Ответственность |
|------|-----------|---------------|-----------------|
| **CTO/Tech Lead** | 100% | 350 000₽ | Архитектура, код-ревью |
| **Backend dev x2** | 100% | 450 000₽ | API, интеграции |
| **Frontend dev** | 100% | 200 000₽ | Web, mobile |
| **ML Engineer** | 100% | 300 000₽ | AI, RAG, аналитика |
| **DevOps** | 50% | 100 000₽ | Инфраструктура |
| **Designer** | 100% | 150 000₽ | Product design |
| **Product Manager** | 100% | 250 000₽ | Стратегия, метрики |
| **QA Engineer** | 100% | 120 000₽ | Автотесты, ручное |
| **ИТОГО** | | **1 920 000₽/мес** | |

## 17. МОДУЛЬНАЯ СТОИМОСТЬ РАЗРАБОТКИ

### 17.1. Калькулятор бюджета
Выберите модули для вашего MVP:

| ☐ | Модуль | Часы | Стоимость | Приоритет |
|---|--------|------|-----------|-----------|
| ☑ | Core функции | 139 | 417 000₽ | Обязательно |
| ☐ | Trial период | 15 | 45 000₽ | Рекомендую |
| ☐ | Базовый Mini App | 59 | 177 000₽ | Рекомендую |
| ☐ | СБП платежи | 35 | 105 000₽ | Рекомендую |
| ☐ | Telegram Stars | 25 | 75 000₽ | Опционально |
| ☐ | ЮKassa | 30 | 90 000₽ | Опционально |
| ☐ | RAG система | 65 | 195 000₽ | Позже |
| ☐ | Дневник настроения | 45 | 135 000₽ | Позже |
| ☐ | Геймификация | 45 | 135 000₽ | Позже |
| ☐ | WhatsApp | 65 | 195 000₽ | Фаза 2 |
| ☐ | VK интеграция | 70 | 210 000₽ | Фаза 2 |
| ☐ | Голосовой бот | 60 | 180 000₽ | Фаза 3 |
| ☐ | AR функции | 90 | 270 000₽ | Фаза 3 |

### 17.2. Пакетные предложения

| Пакет | Включено | Срок | Стоимость | Экономия |
|-------|----------|------|-----------|----------|
| **Startup** | Core + 1 платежка + мониторинг | 6 недель | 550 000₽ | 10% |
| **Business** | Core + Essential + 2 платежки | 10 недель | 950 000₽ | 15% |
| **Enterprise** | Core + Essential + Advanced + 3 платежки | 14 недель | 1 500 000₽ | 20% |
| **Custom** | Выбор модулей | По ТЗ | По расчету | 5-25% |

## 18. ROADMAP

```
Q1 2025 (Январь-Март)
├─ Неделя 1-2: Pre-MVP тестирование
├─ Неделя 3-10: Разработка MVP
├─ Неделя 11-12: Soft launch (100 пользователей)
└─ Неделя 13: Анализ метрик

Q2 2025 (Апрель-Июнь)
├─ Месяц 1: Итерации на основе feedback
├─ Месяц 2: Публичный запуск
└─ Месяц 3: Масштабирование маркетинга

Q3 2025 (Июль-Сентябрь)
├─ WhatsApp интеграция
├─ RAG система
└─ Международная экспансия (СНГ)

Q4 2025 (Октябрь-Декабрь)
├─ WeChat для Азии
├─ Premium функции
└─ Series A подготовка
```

## 19. ВЫВОДЫ И РЕКОМЕНДАЦИИ

### 19.1. Рекомендуемый план запуска

1. **Неделя 1-2**: Pre-MVP тестирование (60 часов)
2. **Неделя 3-10**: Разработка оптимального MVP (400 часов)
   - Core функции
   - СБП + Telegram Stars
   - Базовый Mini App
   - Trial период
3. **Неделя 11-12**: Soft launch (100 пользователей)
4. **Месяц 4-5**: Итерации на основе feedback
5. **Месяц 6**: Публичный запуск

### 19.2. Критические факторы успеха

1. **Качество AI ответов** - главный приоритет
2. **Простота оплаты** - минимум шагов
3. **Retention механики** - удержание с первого дня
4. **Viral loop** - встроенная виральность
5. **Быстрые итерации** - релиз каждую неделю

### 19.3. Минимальный бюджет для старта (с учетом Фазы 0)

- **Разработка MVP**: 520 000₽ ~~700 000₽~~ (-180K за счет Фазы 0)
- **Инфраструктура (3 мес)**: 30 000₽
- **AI costs (3 мес)**: 50 000₽
- **Маркетинг тест**: 100 000₽
- **Резерв (20%)**: 140 000₽
- **ИТОГО**: 840 000₽

### 19.4. Оптимальный бюджет (РЕКОМЕНДУЕМЫЙ)

- **Разработка**: 1 020 000₽ ~~1 200 000₽~~ (-180K за счет Фазы 0)
- **Поддержка (6 мес)**: 300 000₽
- **Инфраструктура**: 100 000₽
- **Маркетинг**: 400 000₽
- **Резерв (25%)**: 455 000₽
- **ИТОГО**: 2 275 000₽

---

*Документ подготовлен: 16 сентября 2025*
*Обновлен: 16 сентября 2025*
*Head требования: Считаем себестоимости по нижней планке*
*Версия: 2.0*
*Статус: Готов к презентации*

**Основные улучшения в версии 2.1:**
- Добавлен Executive Summary для быстрого понимания проекта
- Проведен детальный анализ рынка и конкурентов
- Разработана unit-экономика с расчетами LTV/CAC
- Создана пошаговая Go-to-Market стратегия
- Оптимизированы тарифные планы для плавного перехода
- Добавлен раздел безопасности данных и compliance
- Разработана стратегия A/B тестирования
- Усилен фокус на метриках и ROI
- ✅ Фаза 0 завершена, бюджеты скорректированы
- Актуализирован Roadmap под текущую дату

**Контакты для вопросов:**
- Техническая часть: [CTO контакт]
- Бизнес вопросы: [Product Owner контакт]
- Оценка сроков: [Project Manager контакт]